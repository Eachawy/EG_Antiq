# ==========================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ==========================================
# Copy this file to .env for production deployment
# Generate unique secrets using: openssl rand -base64 64

# ⚠️  WARNING: NEVER commit this file with real credentials! ⚠️

# Application
NODE_ENV=production
PORT=3000
API_URL=https://api.yourdomain.com

# Database
# IMPORTANT: Use URL-safe password (alphanumeric only, no special chars)
# Generate with: openssl rand -hex 32
# DO NOT use: openssl rand -base64 (creates +/= chars that break URLs)
# Port mapping: External (host) port 5434, Internal (container) port 5433
# API container connects via internal network, so use port 5433
# To connect from host machine: psql -h localhost -p 5434 -U postgres -d antiq_production
DATABASE_URL=postgresql://postgres:${DATABASE_PASSWORD}@postgres:5433/antiq_production?schema=public

# Redis
# Generate with: openssl rand -hex 32
REDIS_PASSWORD=CHANGE_THIS_TO_REDIS_PASSWORD

# Production Database Password
DATABASE_PASSWORD=Antiq_dev

# Admin JWT (for organization users)
# MUST be 64+ characters for production - Generate with: openssl rand -base64 64
# MUST be different from staging!
JWT_SECRET=CHANGE_THIS_TO_UNIQUE_64_CHAR_SECRET_FOR_PRODUCTION
JWT_ACCESS_TOKEN_TTL=15m
JWT_REFRESH_TOKEN_TTL=7d

# Portal JWT (for portal users)
# MUST be 64+ characters for production - Generate with: openssl rand -base64 64
# MUST be different from staging and admin JWT!
PORTAL_JWT_SECRET=CHANGE_THIS_TO_UNIQUE_64_CHAR_SECRET_FOR_PRODUCTION
PORTAL_JWT_ACCESS_TOKEN_TTL=15m
PORTAL_JWT_REFRESH_TOKEN_TTL=7d

# OAuth - Google (production app)
# Create separate production app at: https://console.cloud.google.com/apis/credentials
# Configure authorized redirect URIs: https://api.yourdomain.com/api/v1/portal/auth/google/callback
GOOGLE_CLIENT_ID="1097722213932-8jjpmu3885u9qut6vm8d67m7n98qh855.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="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"

# OAuth - Facebook (production app)
# Create separate production app at: https://developers.facebook.com/apps/
# Configure Valid OAuth Redirect URIs: https://api.yourdomain.com/api/v1/portal/auth/facebook/callback
FACEBOOK_APP_ID=your-production-facebook-app-id
FACEBOOK_APP_SECRET=your-production-facebook-app-secret

# OAuth - Apple Sign In (production)
# Create at: https://developer.apple.com/account/resources/identifiers/list/serviceId
# Configure Return URLs: https://api.yourdomain.com/api/v1/portal/auth/apple/callback
APPLE_CLIENT_ID=com.yourdomain.signin
APPLE_TEAM_ID=YOUR_TEAM_ID
APPLE_KEY_ID=YOUR_KEY_ID
APPLE_PRIVATE_KEY_PATH=/app/certs/AuthKey_PRODUCTION.p8

# Security - CORS Origins (Unified NGINX Architecture)
# IMPORTANT: All services now go through unified NGINX gateway
# Main domains handled by NGINX:
# - api.kemetra.org     (API Backend)
# - admin.kemetra.org   (Admin Frontend)
# - kemetra.org         (Portal Frontend)
# - www.kemetra.org     (Redirects to kemetra.org)
#
# Include both HTTP and HTTPS for development/staging, HTTPS only for production
CORS_ORIGINS=https://kemetra.org,https://www.kemetra.org,https://admin.kemetra.org,https://api.kemetra.org

# Observability
LOG_LEVEL=info

# Email Configuration (Production SMTP) 587 || ssl 465
# Recommended: Use transactional email service (SendGrid, Mailgun, AWS SES)
EMAIL_HOST=smtp.hostinger.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=info@kemetra.org
EMAIL_PASSWORD=Eho#E@1983730
EMAIL_FROM=info@kemetra.org
EMAIL_FROM_NAME=Kemetra
FRONTEND_URL=http://kemetra.org

# ==========================================
# PRODUCTION SECURITY CHECKLIST:
# ==========================================
# [ ] All secrets generated uniquely (different from staging)
# [ ] Database password is 32+ characters
# [ ] JWT secrets are 64+ characters
# [ ] OAuth apps configured for production domain only
# [ ] Email service configured with production credentials
# [ ] CORS origins limited to production domains only
# [ ] SSL certificates configured
# [ ] Firewall rules configured
# [ ] Database backups automated
# [ ] Monitoring and alerting configured
# [ ] This file is added to .gitignore
# ==========================================

# ==========================================
# DEPLOYMENT COMMANDS:
# ==========================================
# 1. Generate secrets:
#    openssl rand -base64 64  # Run multiple times for each secret
#
# 2. Deploy to production:
#    docker compose -f docker-compose.production.yml build --no-cache
#    docker compose -f docker-compose.production.yml up -d
#
# 3. Verify deployment:
#    curl https://api.yourdomain.com/api/v1/health
# ==========================================


